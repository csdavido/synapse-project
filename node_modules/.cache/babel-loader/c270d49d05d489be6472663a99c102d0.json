{"ast":null,"code":"var _jsxFileName = \"/Users/reuben/Desktop/school/osu/capstone/synapse-project/src/thoughts.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport Timestamp from 'react-timestamp';\nimport { SYNAPSE_ABI, SYNAPSE_ADDRESS } from './config';\nimport { PROFILE_ABI, PROFILE_ADDRESS } from './config';\nimport { FOLLOW_ABI, FOLLOW_ADDRESS } from '../config';\n\nclass Thoughts extends Component {\n  async componentWillMount() {\n    await this.loadWeb3();\n    await this.getThoughts();\n  }\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n  }\n\n  async checkVar() {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    const synapse = new web3.eth.Contract(SYNAPSE_ABI, SYNAPSE_ADDRESS);\n    const profile = new web3.eth.Contract(PROFILE_ABI, PROFILE_ADDRESS);\n    const follow = new web3.eth.Contract(FOLLOW_ABI, FOLLOW_ADDRESS);\n    this.setState({\n      follow\n    });\n    this.setState({\n      profile\n    });\n    this.setState({\n      thoughtCount\n    });\n    var thoughtCount = await profile.methods.thoughtCount().call();\n    const latestCall = await profile.methods.thoughts(thoughtCount - 1).call();\n    const latestCallCheck = await profile.methods.thoughts(thoughtCount - 2).call();\n    const latest = latestCall.thought;\n    const latestCheck = latestCallCheck.thought;\n\n    if (this.state.latest == latest) {\n      return;\n    } else {\n      this.getThoughts();\n    }\n  }\n\n  async addFollow(followee) {\n    this.state.follow.methods.addFollower(followee).send({\n      from: this.state.account\n    });\n  }\n\n  async getThoughts() {\n    this.setState({\n      thoughts: []\n    });\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\");\n    const synapse = new web3.eth.Contract(SYNAPSE_ABI, SYNAPSE_ADDRESS);\n    const profile = new web3.eth.Contract(PROFILE_ABI, PROFILE_ADDRESS);\n    this.setState({\n      profile\n    });\n    this.setState({\n      thoughtCount\n    });\n    var thoughtCount = await profile.methods.thoughtCount().call();\n    const latestCall = await profile.methods.thoughts(thoughtCount - 1).call();\n    const latestCallCheck = await profile.methods.thoughts(thoughtCount - 2).call();\n    const latest = latestCall.thought;\n    const latestCheck = latestCallCheck.thought;\n\n    if (thoughtCount < 5) {\n      for (var i = thoughtCount - 1; i >= 0; i--) {\n        const singleThought = await profile.methods.thoughts(i).call();\n        this.setState({\n          thoughts: [...this.state.thoughts, singleThought] //thoughts: [...this.setState({thoughts: [...this.state.thoughts, singleThought]})]\n\n        });\n      }\n    } else {\n      for (var i = thoughtCount - 1; i >= thoughtCount - 5; i--) {\n        const singleThought = await profile.methods.thoughts(i).call();\n        this.setState({\n          thoughts: [...this.state.thoughts, singleThought]\n        });\n      }\n    }\n\n    this.setState({\n      latest: latest\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      thoughts: [],\n      latest: ''\n    };\n    this.addFollow = this.addFollow.bind(this);\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => this.checkVar(), 2000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      class: \"latestText\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \" Latest Thoughts: \"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, this.state.thoughts.map((thought, key) => {\n      return React.createElement(\"div\", {\n        key: key,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"thought-wrap\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"thought-head\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"thought-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"@\", thought.sender), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, thought.thought), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"-\", thought.handle))), React.createElement(\"div\", {\n        class: \"thought-counts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"comments\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        class: \"feather feather-message-circle sc-dnqmqq jxshSx\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"20\",\n        height: \"20\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        \"stroke-width\": \"2\",\n        \"stroke-linecap\": \"round\",\n        \"stroke-linejoin\": \"round\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"path\", {\n        d: \"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"comment-num\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, \"0\")), React.createElement(\"div\", {\n        class: \"shares\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        class: \"feather feather-repeat sc-dnqmqq jxshSx\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"20\",\n        height: \"20\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        \"stroke-width\": \"2\",\n        \"stroke-linecap\": \"round\",\n        \"stroke-linejoin\": \"round\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"polyline\", {\n        points: \"17 1 21 5 17 9\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        d: \"M3 11V9a4 4 0 0 1 4-4h14\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }), React.createElement(\"polyline\", {\n        points: \"7 23 3 19 7 15\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }), React.createElement(\"path\", {\n        d: \"M21 13v2a4 4 0 0 1-4 4H3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"share-num\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"0\")), React.createElement(\"div\", {\n        class: \"likes\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        class: \"feather feather-heart sc-dnqmqq jxshSx\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"20\",\n        height: \"20\",\n        viewBox: \"0 0 24 24\",\n        fill: \"none\",\n        stroke: \"currentColor\",\n        \"stroke-width\": \"2\",\n        \"stroke-linecap\": \"round\",\n        \"stroke-linejoin\": \"round\",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(\"path\", {\n        d: \"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"like-num\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"0\")))));\n    })));\n  }\n\n}\n\nexport default Thoughts;","map":{"version":3,"sources":["/Users/reuben/Desktop/school/osu/capstone/synapse-project/src/thoughts.js"],"names":["React","Component","Web3","Timestamp","SYNAPSE_ABI","SYNAPSE_ADDRESS","PROFILE_ABI","PROFILE_ADDRESS","FOLLOW_ABI","FOLLOW_ADDRESS","Thoughts","componentWillMount","loadWeb3","getThoughts","window","ethereum","web3","enable","currentProvider","alert","checkVar","givenProvider","synapse","eth","Contract","profile","follow","setState","thoughtCount","methods","call","latestCall","thoughts","latestCallCheck","latest","thought","latestCheck","state","addFollow","followee","addFollower","send","from","account","i","singleThought","constructor","props","bind","componentDidMount","interval","setInterval","componentWillUnmount","clearInterval","render","map","key","sender","handle"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Web3 from 'web3'\nimport Timestamp from 'react-timestamp'\nimport { SYNAPSE_ABI, SYNAPSE_ADDRESS } from './config'\nimport { PROFILE_ABI, PROFILE_ADDRESS } from './config'\nimport { FOLLOW_ABI, FOLLOW_ADDRESS } from '../config'\n\n\nclass Thoughts extends Component {\n\n  async componentWillMount() {\n    await this.loadWeb3()\n    await this.getThoughts()\n  }\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      await window.ethereum.enable()\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n    }\n    else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n    }\n  }\n\n\n\n  async checkVar () {\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\")\n\n    const synapse = new web3.eth.Contract(SYNAPSE_ABI, SYNAPSE_ADDRESS)\n    const profile = new web3.eth.Contract(PROFILE_ABI, PROFILE_ADDRESS)\n\n    const follow = new web3.eth.Contract(FOLLOW_ABI, FOLLOW_ADDRESS)\n\n    this.setState({ follow })\n\n    this.setState({ profile })\n    this.setState({ thoughtCount })\n\n    var thoughtCount = await profile.methods.thoughtCount().call()\n\n    const latestCall = await profile.methods.thoughts(thoughtCount-1).call()\n    const latestCallCheck = await profile.methods.thoughts(thoughtCount-2).call()\n    const latest = latestCall.thought\n    const latestCheck = latestCallCheck.thought\n\n    if (this.state.latest == latest) {\n      return\n    }\n\n    else {\n      this.getThoughts()\n    }\n\n\n  }\n\n  async addFollow(followee) {\n\n    this.state.follow.methods.addFollower(followee).send({ from: this.state.account })\n\n  }\n\n  async getThoughts() {\n\n    this.setState({ thoughts: [] })\n\n    const web3 = new Web3(Web3.givenProvider || \"http://localhost:8545\")\n\n    const synapse = new web3.eth.Contract(SYNAPSE_ABI, SYNAPSE_ADDRESS)\n    const profile = new web3.eth.Contract(PROFILE_ABI, PROFILE_ADDRESS)\n\n    this.setState({ profile })\n    this.setState({ thoughtCount })\n\n    var thoughtCount = await profile.methods.thoughtCount().call()\n\n    const latestCall = await profile.methods.thoughts(thoughtCount-1).call()\n    const latestCallCheck = await profile.methods.thoughts(thoughtCount-2).call()\n    const latest = latestCall.thought\n    const latestCheck = latestCallCheck.thought\n\n\n\n    if (thoughtCount < 5) {\n      for (var i = thoughtCount-1; i >= 0; i--) {\n        const singleThought = await profile.methods.thoughts(i).call()\n        this.setState({\n          thoughts: [...this.state.thoughts, singleThought]\n          //thoughts: [...this.setState({thoughts: [...this.state.thoughts, singleThought]})]\n        })\n      }\n    }\n    else {\n      for (var i = thoughtCount-1; i >= (thoughtCount-5); i--) {\n        const singleThought = await profile.methods.thoughts(i).call()\n        this.setState({\n          thoughts: [...this.state.thoughts, singleThought]\n        })\n      }\n    }\n\n    this.setState({ latest: latest })\n\n\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      thoughts: [],\n      latest: ''\n    }\n\n    this.addFollow = this.addFollow.bind(this)\n    \n  }\n\n  componentDidMount() {\n\n    this.interval = setInterval(() => this.checkVar(), 2000);\n\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n\n\n  render() {\n    return (\n\n\n\n      <div>\n      <p class=\"latestText\"> Latest Thoughts: </p>\n\n\n        <ul>\n            { this.state.thoughts.map((thought, key) => {\n              return(\n                <div key={key}>\n\n\n                  <div class=\"thought-wrap\">\n                    <div class=\"thought-head\">\n                      <div class=\"thought-info\">\n                        <span>@{thought.sender}</span>\n                        <p>{thought.thought}</p>\n                        <p>-{thought.handle}</p>\n                      </div>\n                    </div>\n\n\n\n                    <div class=\"thought-counts\">\n\n                      <div class=\"comments\">\n                        <svg class=\"feather feather-message-circle sc-dnqmqq jxshSx\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\"><path d=\"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"></path></svg>\n                        <div class=\"comment-num\">0</div>\n                      </div>\n\n                      <div class=\"shares\">\n                        <svg class=\"feather feather-repeat sc-dnqmqq jxshSx\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\"><polyline points=\"17 1 21 5 17 9\"></polyline><path d=\"M3 11V9a4 4 0 0 1 4-4h14\"></path><polyline points=\"7 23 3 19 7 15\"></polyline><path d=\"M21 13v2a4 4 0 0 1-4 4H3\"></path></svg>\n                        <div class=\"share-num\">0</div>\n                      </div>\n\n                      <div class=\"likes\">\n                        <svg class=\"feather feather-heart sc-dnqmqq jxshSx\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\"><path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\"></path></svg>\n                        <div class=\"like-num\">0</div>\n                      </div>\n\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </ul>\n\n\n      </div>\n    );\n  }\n}\n\nexport default Thoughts;\n"]},"metadata":{},"sourceType":"module"}